<?xml version="1.0" encoding="UTF-8"?>

<project basedir="." default="all" name="build-unit">
    <import file="../../nbbuild/default.xml"/>

    <path id="compiletest.classpath">   
        <pathelement location="${core.dir}/core/org-netbeans-swing-plaf.jar"/>
        <pathelement location="${core.dir}/modules/org-netbeans-swing-tabcontrol.jar"/>
        <pathelement location="${core.dir}/core/core.jar"/>
        <pathelement location="${core.dir}/lib/boot.jar"/>
        <pathelement location="${openide.dir}/core/openide.jar"/>
        <!-- XXX -->
        <pathelement location="${openide/loaders.dir}/core/openide-loaders.jar"/>
        <pathelement location="${openide/execution.dir}/modules/org-openide-execution.jar"/>
        <pathelement location="${openide/io.dir}/modules/org-openide-io.jar"/> 
    </path>
    
    <path id="codetest.classpath">
        <pathelement location="${core.dir}/core/core.jar"/>
        <pathelement location="${core.dir}/lib/boot.jar"/>
        <pathelement location="${openide.dir}/core/openide.jar"/>
        <pathelement location="${core.dir}/core/org-netbeans-swing-plaf.jar"/>
        <pathelement location="${core.dir}/modules/org-netbeans-swing-tabcontrol.jar"/>
        <pathelement location="${core/windows.dir}/modules/org-netbeans-core-windows.jar"/>
        <pathelement location="${openide/loaders.dir}/core/openide-loaders.jar"/>
        <pathelement location="${openide/execution.dir}/modules/org-openide-execution.jar"/>
        <pathelement location="${openide/io.dir}/modules/org-openide-io.jar"/> 
        <pathelement location="${core/settings.dir}/modules/org-netbeans-modules-settings.jar"/>
        <fileset dir="${libs/xerces.dir}/modules/ext">
            <include name="xerces-*.jar"/>
            <include name="xml-commons-dom-ranges-*.jar"/>
        </fileset>
    </path>
    
    <!-- ========= -->
    <!-- Compilers -->
    <!-- ========= -->
    
    <target name="unit-compiler">
        <buildTests srcDir="unit/src" compileexcludes="**/data/**">
            <classpath refid="compiletest.classpath"/>
        </buildTests>
    </target>
    
    <!-- ========= -->
    <!-- Executors -->
    <!-- ========= -->
    
    <target name="runidetest">
        <executeTests pluginName="ide">
            <classpath/>
        </executeTests>
    </target>
    
    <target name="runcodetest">
        <executeTests pluginName="jvm">
            <classpath refid="codetest.classpath"/>
        </executeTests>
    </target>
    
</project>
