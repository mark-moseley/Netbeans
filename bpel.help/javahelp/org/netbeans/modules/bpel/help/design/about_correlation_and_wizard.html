<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
* Copyright 2008 Sun Microsystems, Inc. All rights reserved.
* Use is subject to license terms.
-->
<html>
<head>
<title>BPEL Designer: Understanding Correlation. Using the Correlation Wizard</title>
<link rel="stylesheet" href="nbdocs://org.netbeans.modules.usersguide/org/netbeans/modules/usersguide/ide.css" type="text/css">
</head>
<body>
<h2>BPEL Designer: Understanding Correlation. Using the Correlation Wizard </h2>
<p><small><a href="#seealso">See Also</a></small></p>
<p>The BPEL Service Engine runtime uses a mechanism called <i>correlation</i> to track the 
  multiple, stateful, long-running exchanges of messages that typically take 
  place between a
  BPEL process and its partner services. A message in such a conversation is  mapped   to a composite value made up of one or more properties  defined in a WSDL file.  </p>
<p>Thus,  correlation sets are  used to support stateful collaboration between web services in a  standardized, implementation independent way. Correlation sets rely on  the correlation data tokens stored in the message envelopes, headers,  or business documents themselves. The declaration of correlation relies  on the declarative properties of messages. A property is  a field  within a message identified by a query. Queries are specified by  special constructs called property aliases.</p>
<p>The following terms apply to correlation: </p>
<ul>
  <li>A <i>property</i> is an abitrarily named token. It must be a  simple type. It is defined in  a WSDL file.<br>
  </li>
  <li>A <i>property alias</i> is a rule that tells the BPEL runtime  how to map data from a message into a property value. You can define  several property aliases for a property that will be used as a  correlation value. You would do this if the same property value needs  to be mapped from more than one message, which is typical in  correlation. For instance, if two different messages have the same part that you want to extract. Then you need one property and two property aliases - one for each message).&nbsp; Property aliases are defined in a WSDL file.<br>
  </li>
  <li>A <i>correlation set</i> is a compound key made up of one or more   property values, actually it is a property set. The BPEL runtime uses this key to ensure that  messages are routed to the right process instance for a particular  conversation. Correlation sets are defined in a BPEL file.</li>
  <li><em>Correlation</em>s mark the activities, they identify the correlation sets by name and indicate which <span lang="EN">correlation sets</span> occur in the  messages being sent or received. </li>
</ul>
<h3>Elements That Use and Express Correlation </h3>
<p>Correlation sets can be defined for the Process element. The defined correlation sets are then used by message activities (<a href="../elements/invoke.html" title="Invoke">Invoke</a>, <a href="../elements/reply.html" title="Reply">Reply</a>, and <a href="../elements/receive.html" title="Receive">Receive</a>), which describe a conversation between a process and a partner service.</p>
<p>Correlation sets on Invoke activities are used to verify that 
outbound messages contain data that is consistent with the data found 
within specified correlation set instances. </p>
<p>Correlation set names are also used in the <tt>onMessage</tt> branches 
of <a href="../elements/pick.html" title="Pick">Pick</a> elements and in the <tt>onEvent</tt> variant of <a href="../elements/add_event_handler_onevent.html">eventHandlers</a>.</p>
<h3>Ways to define correlation:</h3>
<ul>
  <li><a href="#corr_wizard">Use the Correlation wizard</a> which will automatically perform all the main steps. This is the most easy and convenient way to define correlation. Usually you do not have to know in details how does correlation work. The Wizard will make it for you. </li>
  <li><a href="create_correlation_manually.html">Define correlation manually</a></li>
</ul>
<h3><a name="corr_wizard">Using the Correlation Wizard</a></h3>
<p>Correlation Wizard is used to define correlations for two messaging activities, such as Invoke, Reply, Receive, OnEvent or onMessage branch of Pick element.</p>
<p><strong>Note:</strong> The wizard only enables you to create correlation. You can't edit correlation in the wizard.  </p>
<p><strong>To create correlation using the Correlation Wizard:  </strong></p>
<ul>
  <li>In the Design view, right click the activity that requires correlation and choose Define Correlation. The Correlation Wizard opens. </li>
  <li><strong>Step 1.</strong> Select the messaging activity. From the drop-down list choose an initiating messaging activity. The activity chosen here will initiate the correlation set. Click Next.  </li>
  <li><strong>Step 2.</strong> Define the correlation. On the left you see a tree structure of the message that initiating activity sends or receives. On the right you see the structure of the message passed by the correlating activity. Connect the messages parts that should be used to define correlation by selecting the node in the source tree pane and dragging the pointer to the node in the destination tree pane. </li>
  <li>The correlation is set. 
   The Wizard will create properties and property aliases in a WSDL file, define a correlation set in BPEL, and associate the correlation set with the activities you chose. 
    <br>
    Note that  properties and property aliases are written to a new WSDL file that you can see  among the process files of the BPEL Module. The original WSDL file for the partner service is imported to the new WSDL. For all correlation created using the Wizard, both properties and property aliases are written to this file. Partner WSDL files are imported. 
    The correlation set defined in the BPEL file refers to the new WSDL.    </li>
</ul>
<dl>
<dt><a name="seealso">See Also</a></dt>
<dd><a href="create_correlation_manually.html" title="Adding Correlation Sets Manually">Adding Correlation Sets Manually</a></dd>
<dd><a href="nbdocs://org.netbeans.modules.xml.wsdlui/org/netbeans/modules/xml/wsdlui/docs/wsdl_editor_prop.html" title="Configuring Properties and Property Aliases Using the WSDL View">Configuring Properties and Property Aliases Using the WSDL View</a></dd>
</dl>
<hr>
<small>  
<a href="../credits.html">Legal Notices</a></small>
<table border="0" cellpadding="150">
<tr><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td></tr>
<tr><td>&nbsp;</td></tr>
</table>
</body>
</html>

