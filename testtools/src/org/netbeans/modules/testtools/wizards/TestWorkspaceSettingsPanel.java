/*
 *                 Sun Public License Notice
 * 
 * The contents of this file are subject to the Sun Public License
 * Version 1.0 (the "License"). You may not use this file except in
 * compliance with the License. A copy of the License is available at
 * http://www.sun.com/
 * 
 * The Original Code is NetBeans. The Initial Developer of the Original
 * Code is Sun Microsystems, Inc. Portions Copyright 1997-2002 Sun
 * Microsystems, Inc. All Rights Reserved.
 */

package org.netbeans.modules.testtools.wizards;

/*
 * TestWorkspaceSettingsPanel.java
 *
 * Created on April 10, 2002, 1:43 PM
 */

import org.openide.WizardDescriptor;
import org.openide.util.HelpCtx;
import org.openide.loaders.TemplateWizard;
import java.awt.CardLayout;

/**
 *
 * @author  <a href="mailto:adam.sotona@sun.com">Adam Sotona</a>
 */
public class TestWorkspaceSettingsPanel extends javax.swing.JPanel implements WizardDescriptor.FinishPanel {
    
    private boolean stop=true;
    
    /** Creates new form TestWorkspacePanel */
    public TestWorkspaceSettingsPanel() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        java.awt.GridBagConstraints gridBagConstraints;

        panel = new javax.swing.JPanel();
        levelLabel = new javax.swing.JLabel();
        levelCombo = new javax.swing.JComboBox();
        typeLabel = new javax.swing.JLabel();
        typeField = new javax.swing.JTextField();
        attrLabel = new javax.swing.JLabel();
        attrField = new javax.swing.JTextField();
        jSeparator1 = new javax.swing.JSeparator();
        advancedCheck = new javax.swing.JCheckBox();
        netbeansLabel = new javax.swing.JLabel();
        netbeansField = new javax.swing.JTextField();
        xtestLabel = new javax.swing.JLabel();
        xtestField = new javax.swing.JTextField();
        sourceLabel = new javax.swing.JLabel();
        sourceCombo = new javax.swing.JComboBox();
        netbeansButton = new javax.swing.JButton();
        xtestButton = new javax.swing.JButton();
        stopLabel = new javax.swing.JLabel();

        setLayout(new java.awt.CardLayout());

        panel.setLayout(new java.awt.GridBagLayout());

        levelLabel.setText("Test Workspace possition in CVS: ");
        levelLabel.setDisplayedMnemonic(87);
        levelLabel.setLabelFor(levelCombo);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 0, 4);
        panel.add(levelLabel, gridBagConstraints);

        levelCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "On top of the module (repository / module)", "One level lower (repository / module / package)", "Two levels lower (repository / module / package / package)", "Out of CVS structute (for local use only)" }));
        levelCombo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                levelComboActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        panel.add(levelCombo, gridBagConstraints);

        typeLabel.setText("Default Test Type: ");
        typeLabel.setDisplayedMnemonic(84);
        typeLabel.setLabelFor(typeField);
        typeLabel.setEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 0, 4);
        panel.add(typeLabel, gridBagConstraints);

        typeField.setEnabled(false);
        typeField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                typeFieldFocusGained(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        panel.add(typeField, gridBagConstraints);

        attrLabel.setText("Default Attributes: ");
        attrLabel.setDisplayedMnemonic(65);
        attrLabel.setLabelFor(attrField);
        attrLabel.setEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 0, 4);
        panel.add(attrLabel, gridBagConstraints);

        attrField.setEnabled(false);
        attrField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                attrFieldFocusGained(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 6;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        panel.add(attrField, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 0.01;
        gridBagConstraints.insets = new java.awt.Insets(4, 0, 4, 4);
        panel.add(jSeparator1, gridBagConstraints);

        advancedCheck.setText("Advanced Settings");
        advancedCheck.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                advancedCheckActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.weightx = 0.01;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 0);
        panel.add(advancedCheck, gridBagConstraints);

        netbeansLabel.setText("Netbeans Home: ");
        netbeansLabel.setDisplayedMnemonic(78);
        netbeansLabel.setLabelFor(netbeansField);
        netbeansLabel.setEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 7;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 0, 4);
        panel.add(netbeansLabel, gridBagConstraints);

        netbeansField.setEnabled(false);
        netbeansField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                netbeansFieldFocusGained(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 8;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        panel.add(netbeansField, gridBagConstraints);

        xtestLabel.setText("XTest Home: ");
        xtestLabel.setDisplayedMnemonic(88);
        xtestLabel.setLabelFor(xtestField);
        xtestLabel.setEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 9;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 0, 4);
        panel.add(xtestLabel, gridBagConstraints);

        xtestField.setEnabled(false);
        xtestField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                xtestFieldFocusGained(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 10;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        panel.add(xtestField, gridBagConstraints);

        sourceLabel.setText("Source Location: ");
        sourceLabel.setDisplayedMnemonic(83);
        sourceLabel.setLabelFor(sourceCombo);
        sourceLabel.setEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 11;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 0.01;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        panel.add(sourceLabel, gridBagConstraints);

        sourceCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "IDE", "SRC", "JAR" }));
        sourceCombo.setEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 11;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 4, 4, 4);
        panel.add(sourceCombo, gridBagConstraints);

        netbeansButton.setText("...");
        netbeansButton.setPreferredSize(new java.awt.Dimension(30, 20));
        netbeansButton.setMinimumSize(new java.awt.Dimension(30, 20));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 8;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 0.01;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 0, 4, 4);
        panel.add(netbeansButton, gridBagConstraints);

        xtestButton.setText("...");
        xtestButton.setPreferredSize(new java.awt.Dimension(30, 20));
        xtestButton.setMinimumSize(new java.awt.Dimension(30, 20));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 10;
        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 0.01;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(4, 0, 4, 4);
        panel.add(xtestButton, gridBagConstraints);

        add(panel, "ok");

        stopLabel.setText("Test Workspace already exists in selected package.");
        stopLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        add(stopLabel, "stop");

    }//GEN-END:initComponents

    private void xtestFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_xtestFieldFocusGained
        xtestField.selectAll();
    }//GEN-LAST:event_xtestFieldFocusGained

    private void netbeansFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_netbeansFieldFocusGained
        netbeansField.selectAll();
    }//GEN-LAST:event_netbeansFieldFocusGained

    private void attrFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_attrFieldFocusGained
        attrField.selectAll();
    }//GEN-LAST:event_attrFieldFocusGained

    private void typeFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_typeFieldFocusGained
        typeField.selectAll();
    }//GEN-LAST:event_typeFieldFocusGained

    private void levelComboActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_levelComboActionPerformed
        updatePanel();
    }//GEN-LAST:event_levelComboActionPerformed

    private void advancedCheckActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_advancedCheckActionPerformed
        updatePanel();
    }//GEN-LAST:event_advancedCheckActionPerformed

    private void updatePanel() {
        boolean advanced=advancedCheck.isSelected();
        levelLabel.setEnabled(!advanced);
        levelCombo.setEnabled(!advanced);
        typeLabel.setEnabled(advanced);
        typeField.setEnabled(advanced);
        attrLabel.setEnabled(advanced);
        attrField.setEnabled(advanced);
        netbeansLabel.setEnabled(advanced);
        netbeansField.setEnabled(advanced);
        xtestLabel.setEnabled(advanced);
        xtestField.setEnabled(advanced);
        sourceLabel.setEnabled(advanced);
        sourceCombo.setEnabled(advanced);
        netbeansButton.setEnabled(advanced);
        xtestButton.setEnabled(advanced);
        if (!advanced) {
            typeField.setText("qa-functional");
            attrField.setText("all, ide");
            sourceCombo.setSelectedIndex(0);
             switch (levelCombo.getSelectedIndex()) {
                 case 0:netbeansField.setText("../../../nb_all/nbbuild/netbeans");
                        xtestField.setText("../../../nb_all/xtest");
                        break;
                 case 1:netbeansField.setText("../../../../nb_all/nbbuild/netbeans");
                        xtestField.setText("../../../../nb_all/xtest");
                        break;
                 case 2:netbeansField.setText("../../../../../nb_all/nbbuild/netbeans");
                        xtestField.setText("../../../../../nb_all/xtest");
                        break;
                 case 3:netbeansField.setText(System.getProperty("netbeans.home").replace('\\','/'));
                        xtestField.setText(System.getProperty("netbeans.user").replace('\\','/')+"/xtest-distribution");
                        break;
             }
        }
    }
    
    public void addChangeListener(javax.swing.event.ChangeListener changeListener) {
    }    
    
    public java.awt.Component getComponent() {
        return this;
    }    
    
    public org.openide.util.HelpCtx getHelp() {
        return new HelpCtx(TestWorkspaceSettingsPanel.class);
    }
    
    public void readSettings(Object obj) {
        TemplateWizard wizard=(TemplateWizard)obj;
        try {
            stop=WizardIterator.detectBuildScript(wizard.getTargetFolder());
        } catch (Exception e) {}
        if (stop)
            ((CardLayout)getLayout()).show(this, "stop");
        else
            ((CardLayout)getLayout()).show(this, "ok");
        updatePanel();
    }
    
    public void removeChangeListener(javax.swing.event.ChangeListener changeListener) {
    }
    
    public void storeSettings(Object obj) {
    }

    public boolean isValid() {
        return !stop;
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel sourceLabel;
    private javax.swing.JLabel stopLabel;
    private javax.swing.JButton xtestButton;
    private javax.swing.JLabel levelLabel;
    private javax.swing.JLabel xtestLabel;
    private javax.swing.JTextField xtestField;
    private javax.swing.JLabel typeLabel;
    private javax.swing.JButton netbeansButton;
    private javax.swing.JCheckBox advancedCheck;
    private javax.swing.JTextField typeField;
    private javax.swing.JPanel panel;
    private javax.swing.JLabel attrLabel;
    private javax.swing.JTextField attrField;
    private javax.swing.JComboBox sourceCombo;
    private javax.swing.JLabel netbeansLabel;
    private javax.swing.JComboBox levelCombo;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JTextField netbeansField;
    // End of variables declaration//GEN-END:variables
    
}
