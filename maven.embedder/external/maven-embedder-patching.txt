1. the binary needs to be shaded (most references to org.codehaus.util.* need to be changed to
   hidden.org.codehaus.util.*
2. the apache maven wagon dependencies need to be 1.0-beta-4 (#143319)
3. patch a PropertyEditors.java class in apache's xbean-reflect jar (#135868)


# This patch file was generated by NetBeans IDE
# Following Index: paths are relative to: /home/mkleint/src/xbean/xbean-reflect/src/main/java/org/apache/xbean/propertyeditor
# This patch can be applied using context Tools: Patch action on respective folder.
# It uses platform neutral UTF-8 encoding and \n newlines.
# Above lines and this line are ignored by the patching process.
Index: PropertyEditors.java
--- PropertyEditors.java Base (BASE)
+++ PropertyEditors.java Locally Modified (Based On LOCAL)
@@ -134,16 +134,13 @@
         if (converter == null) throw new NullPointerException("editor is null");
         Class type = converter.getType();
         registry.put(type, converter);
-        PropertyEditorManager.registerEditor(type, converter.getClass());

         if (PRIMITIVE_TO_WRAPPER.containsKey(type)) {
             Class wrapperType = (Class) PRIMITIVE_TO_WRAPPER.get(type);
             registry.put(wrapperType, converter);
-            PropertyEditorManager.registerEditor(wrapperType, converter.getClass());
         } else if (WRAPPER_TO_PRIMITIVE.containsKey(type)) {
             Class primitiveType = (Class) WRAPPER_TO_PRIMITIVE.get(type);
             registry.put(primitiveType, converter);
-            PropertyEditorManager.registerEditor(primitiveType, converter.getClass());
         }
     }

@@ -175,11 +172,6 @@
             return converter;
         }

-        // fall back to a property editor
-        PropertyEditor editor = findEditor(type);
-        if (editor != null) {
-            return editor;
-        }

         converter = findBuiltinConverter(type);
         if (converter != null) {
