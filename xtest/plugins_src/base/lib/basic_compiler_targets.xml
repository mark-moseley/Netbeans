<?xml version="1.0" encoding="UTF-8"?>
<!--
                Sun Public License Notice

The contents of this file are subject to the Sun Public License
Version 1.0 (the "License"). You may not use this file except in
compliance with the License. A copy of the License is available at
http://www.sun.com/

The Original Code is NetBeans. The Initial Developer of the Original
Code is Sun Microsystems, Inc. Portions Copyright 1997-2005 Sun
Microsystems, Inc. All Rights Reserved.
-->
<project default="forbidden" name="compilation_targets">


    <target name="compile">
       <for list="${compile.srcdir}" delimiters=";${path.separator}," property="compile.srcdir.parsed">
         <antcall target="compile-one-dir"/>
       </for>
    </target>

    <target name="compile-one-dir">
        <property name="build.compiler.source" value="1.4"/>
        <property name="compile.classpath" value=""/>
        <property name="compile.excludes" value=""/>
        <!-- default value of compile.destdir defined in module_harness.xml -->
        <mkdir dir="${compile.destdir}"/>
        <javac srcdir="${compile.srcdir.parsed}"
               destdir="${compile.destdir}"
               deprecation="${build.compiler.deprecation}"
               debug="${build.compiler.debug}"
               source="${build.compiler.source}"
               excludes="${compile.excludes}">
            <classpath>
           	<pathelement path="${junit.classpath}"/>    		
		<pathelement path="${compile.classpath}"/>
            </classpath>
        </javac>
        <!-- Copy all resources from test sources (e.g. **/data/**, *.properties etc.) 
             to compile.destdir.
             It needs to be on classpath to enable to find resources in runtime.  -->
        <copy todir="${compile.destdir}">
            <fileset dir="${compile.srcdir.parsed}"
                includesfile="${xtest.home}/standard-test-includes.txt"
                includes="${package.tests.includes}"
                excludesfile="${xtest.home}/standard-test-excludes.txt"
                excludes="${package.tests.excludes}"/>
        </copy>
        <!-- Copy ${xtest.testtype}/data to compile.destdir.root -->
        <copy todir="${compile.destdir.root}">
            <fileset dir="${basedir}">
                <include name="**/data/**"/>
                <!-- ignore ${xtest.testype}/src handled above -->
                <exclude name="*/src/**"/>
            </fileset>
        </copy>
    </target>
    
    <!-- =============== -->
    <!-- utility targets -->
    <!-- =============== -->
        
        
    <!-- forbidden main target -->
    <target name="forbidden">
       <fail message="This script is not intended to be directly executed. This in only library."/>
    </target>  
    
</project>
