<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="netbeans" name="visualweb/samples/bundled">
    <description>Builds, tests, and runs the project org.netbeans.modules.visualweb.samples.bundled</description>
    <import file="../../../nbbuild/templates/projectized.xml"/>

    <target name="jar" depends="gather-samples,projectized-common.jar"/>
    
    <target name="-init" >
        <!-- properties -->
        <property name="webapps.dest"       location="${build.classes.dir}/org/netbeans/modules/visualweb/samples/bundled" />
        <property name="webapps.desc.dest"  location="${webapps.dest}/descriptions" />
        <property name="webapps.repos"      location="../webapps" />
        <property name="webapps.desc"       location="${webapps.repos}/descriptions" />
        <property name="complibs.dest"      location="${cluster}/samples/complibs" />
    </target>

    <target name="gather-samples" depends="-init">
        <echo message="Zipping up and copying sample web app projects." />
        <!-- sample webapps -->
        <mkdir dir="${webapps.desc.dest}" />
        <copy file="${webapps.desc}/TravelCenter.html" todir="${webapps.desc.dest}" />
        <zip basedir="${webapps.repos}/TravelCenter" excludes="CVS,private,.cvsignore" destfile="${webapps.dest}/TravelCenter.zip" />
        <copy file="${webapps.desc}/SinglePageCrudForm.html" todir="${webapps.desc.dest}" />
        <zip basedir="${webapps.repos}/SinglePageCrudForm" excludes="CVS,private,.cvsignore" destfile="${webapps.dest}/SinglePageCrudForm.zip" />
        <copy file="${webapps.desc}/SinglePageCrudTable.html" todir="${webapps.desc.dest}" />
        <zip basedir="${webapps.repos}/SinglePageCrudTable" excludes="CVS,private,.cvsignore" destfile="${webapps.dest}/SinglePageCrudTable.zip" />   
        <copy file="${webapps.desc}/TwoPageCrudTable.html" todir="${webapps.desc.dest}" />
        <zip basedir="${webapps.repos}/TwoPageCrudTable" excludes="CVS,private,.cvsignore" destfile="${webapps.dest}/TwoPageCrudTable.zip" />
        <copy file="${webapps.desc}/MovieAdmin.html" todir="${webapps.desc.dest}" />
        <zip basedir="${webapps.repos}/MovieAdmin" excludes="CVS,private,.cvsignore" destfile="${webapps.dest}/MovieAdmin.zip" />
        <copy file="${webapps.desc}/VehicleIncidentReportApplication.html" todir="${webapps.desc.dest}" />
        <zip basedir="${webapps.repos}/VehicleIncidentReportApplication" excludes="CVS,private,.cvsignore" destfile="${webapps.dest}/VehicleIncidentReportApplication.zip" />
    </target>
    
    <target name="netbeans-extra" depends="-init">
        <echo message="Copying sample complibs." />
        <!-- sample complibs -->
        <mkdir dir="${complibs.dest}" /> <!-- Create the dir because complibs mgr looks there for complibs. -->
    </target>
</project>
