# The contents of this file are subject to the terms of the Common Development
# and Distribution License (the License). You may not use this file except in
# compliance with the License.
#
# You can obtain a copy of the License at http://www.netbeans.org/cddl.html
# or http://www.netbeans.org/cddl.txt.
#
# When distributing Covered Code, include this CDDL Header Notice in each file
# and include the License file at http://www.netbeans.org/cddl.txt.
# If applicable, add the following below the CDDL Header, with the fields
# enclosed by brackets [] replaced by your own identifying information:
# "Portions Copyrighted [year] [name of copyright owner]"
#
# The Original Software is NetBeans. The Initial Developer of the Original
# Software is Sun Microsystems, Inc. Portions Copyright 1997-2006 Sun
# Microsystems, Inc. All Rights Reserved.

########### Syntax Coloring ##################################################################

TOKEN:keyword:( 
    "ACTION" |
    "AST" | 
    "BRACE" |
    "BUNDLE" |
    "COLOR" | 
    "COMPLETE" |  
    "COMPLETION" | 
    "FOLD" | 
    "HYPERLINK" | 
    "IMPORT" | 
    "INDENT" | 
    "MARK" | 
    "NAVIGATOR" | 
    "PARSE" | 
    "PROPERTIES" | 
    "REFORMAT" |
    "SKIP" | 
    "STORE" | 
    "TOKEN" | 
    "TOOLTIP"
)
TOKEN:identifier: ( ["a"-"z" "A"-"Z"] ["a"-"z" "A"-"Z" "0"-"9" "_"]* )
TOKEN:operator: ( 
    ":" | "*" | "?" | "+" | "-" | "[" | "]" | "<" | ">" |
    "^" | "|" | "{" | "}" | "(" | ")" | "," | "=" | ";" | 
    "." | "$"
)
TOKEN:string:( 
    "\"" 
        (  
            [^ "\"" "\\" "\r" "\n"] | 
            ("\\" ["r" "n" "t" "\\" "\'" "\""]) |
            ("\\" "u" ["0"-"9" "a"-"f" "A"-"F"] ["0"-"9" "a"-"f" "A"-"F"] ["0"-"9" "a"-"f" "A"-"F"] ["0"-"9" "a"-"f" "A"-"F"])
        )* 
    "\""
)
TOKEN:string:( 
    "\'" 
        (  
            [^ "\'" "\\" "\r" "\n"] | 
            ("\\" ["r" "n" "t" "\\" "\'" "\""]) |
            ("\\" "u" ["0"-"9" "a"-"f" "A"-"F"] ["0"-"9" "a"-"f" "A"-"F"] ["0"-"9" "a"-"f" "A"-"F"] ["0"-"9" "a"-"f" "A"-"F"])
        )* 
    "\'"
)
TOKEN:comment: ( "#" [^"\n" "\r"]* ["\n" "\r"]+ )
TOKEN:whitespace:( ["\n" "\r" " " "\t"]+ )

SKIP:comment
SKIP:whitespace

S = token S;
S = tokenState S;
S = grammarRule S;
S = command S;
S = ;
                    
token = "TOKEN" ":" <identifier> ":" token2;
token2 = "(" regularExpression ")" token3;
token2 = "{" properties "}";
token3 = ":" state;
token3 = ;
state = "<" <identifier> ">";
tokenState = state tokenState1;
tokenState1 = "{" tokenGroup;
tokenState1 = ":" token;
tokenGroup = tokensInGroup "}";
tokensInGroup = token tokensInGroup;
tokensInGroup = ;
                    
regularExpression = reChoice regularExpression1;
regularExpression1 = "|" reChoice regularExpression1;
regularExpression1 = ;
reChoice = rePart reChoice1;
reChoice1 = rePart reChoice1;
reChoice1 = ;
rePart = <string> [ <identifier, "i"> ] rePartOperatorOrMinus;
rePart = "." rePartOperator;
rePart = reClass rePartOperator;
rePart = "(" regularExpression ")" rePartOperator;
rePartOperator = ;
rePartOperator = "+";
rePartOperator = "?";
rePartOperator = "*";
rePartOperatorOrMinus = "-" <string>;
rePartOperatorOrMinus = rePartOperator;
reClass = "[" reInClassNegation reInClass "]";
reInClassNegation = "^";
reInClassNegation = ;
reInClass = <string> reInClassMinus reInClass1;
reInClass1 = <string> reInClassMinus reInClass1;
reInClass1 = ;
reInClassMinus = "-" <string>;
reInClassMinus = ;
                    
grammarRule = <identifier> "=" grRightSide ";";
grRightSide = grChoice grRightSide1;
grRightSide1 = "|" grChoice grRightSide1;
grRightSide1 = ;
grChoice = grPart grChoice;
grChoice = ;
grPart = <identifier> grOperator;
grPart = tokenDef grOperator;
grPart = <string> grOperator;
grPart = "[" grRightSide "]";
grPart = "(" grRightSide ")" grOperator;
grOperator = "+";
grOperator = "*";
grOperator = "?";
grOperator = ;
tokenDef = "<" <identifier> tokenDef1 ">";
tokenDef1 = "," <string>;
tokenDef1 = ;
                    
command = <keyword> command0;
command0 = ":" selector [":" value];
command0 = value;
value = class | <string> | "{" properties "}" | "(" regularExpression ")";
properties = property properties;
properties = ;
property = <identifier> ":" propertyValue ";";
propertyValue = <string>;
propertyValue = class;
propertyValue = "(" regularExpression ")";
selector = class ("," class)*;                    
class = <identifier> class1;
class1 = "." <identifier> class1;
class1 = ;


NAVIGATOR:token: {
    display_name: "<html><b><font color=000099>TOKEN</font></b>: $identifier$</html>";
}

NAVIGATOR:groupToken: {
    display_name: "<html><b><font color=000099>TOKEN</font></b>: $identifier$</html>";
}

NAVIGATOR:command: {
    display_name: "<html><b><font color=000099>$keyword$</font></b>: $command0.selector$</html>";
}

HYPERLINK:value: org.netbeans.modules.languages.ext.NBS.hyperlink  

COMPLETION:S: {
    text1:        "TOKEN";
    description1: "<html><b><font color=blue>TOKEN</font></b> <font color=#aaaaaa> Regular expression defining one token.</font></html>";
    text2:        "COLOR";
    description2: "<html><b><font color=blue>COLOR</font></b> <font color=#aaaaaa> Defines font&color for some token or grammar rule.</font></html>";
    text3:        "SKIP";
    description3: "<html><b><font color=blue>SKIP</font></b> <font color=#aaaaaa> Tokens ignorred by syntax analyser.</font></html>";
    text4:        "NAVIGATOR";
    description4: "<html><b><font color=blue>NAVIGATOR</font></b> <font color=#aaaaaa> Define AST nodes visible in navigator.</font></html>";
    text5:        "FOLD";
    description5: "<html><b><font color=blue>FOLD</font></b> <font color=#aaaaaa> Define AST nodes to be folded.</font></html>";
    text6:        "COMPLETION";
    description6: "<html><b><font color=blue>COMPLETION</font></b> <font color=#aaaaaa> Define completion content for some AST node.</font></html>";
    text7:        "IMPORT";
    description7: "<html><b><font color=blue>IMPORT</font></b> <font color=#aaaaaa> Imports one language to another.</font></html>";
    text8:        "TOOLTIP";
    description8: "<html><b><font color=blue>TOOLTIP</font></b> <font color=#aaaaaa> Define tooltip for given token.</font></html>";
    text9:        "HYPERLINK";
    description9: "<html><b><font color=blue>HYPERLINK</font></b> <font color=#aaaaaa> Define hyperlink for given token.</font></html>";
}

COMPLETION:colorKey: {
    text1:        "color_name";
    description1: "<html><b><font color=blue>color_name</font></b> <font color=#aaaaaa> The name of coloring.</font></html>";
    text2:        "default_coloring";
    description2: "<html><b><font color=blue>default_coloring</font></b> <font color=#aaaaaa> Defines basic type this font&color is extended from (like keyword, operator).</font></html>";
    text3:        "foreground_color";
    description3: "<html><b><font color=blue>foreground_color</font></b> <font color=#aaaaaa> Foregroud color.</font></html>";
    text4:        "background_color";
    description4: "<html><b><font color=blue>background_color</font></b> <font color=#aaaaaa> background color.</font></html>";
    text5:        "underline_color";
    description5: "<html><b><font color=blue>underline_color</font></b> <font color=#aaaaaa> Underline color.</font></html>";
    text6:        "wave_underline_color";
    description6: "<html><b><font color=blue>wave_underline_color</font></b> <font color=#aaaaaa> Wave underline color.</font></html>";
    text7:        "strike_through_color";
    description7: "<html><b><font color=blue>strike_through_color</font></b> <font color=#aaaaaa> Strike trough color.</font></html>";
    text8:        "font_name";
    description8: "<html><b><font color=blue>font_name</font></b> <font color=#aaaaaa> Font name.</font></html>";
    text9:        "font_type";
    description9: "<html><b><font color=blue>font_type</font></b> <font color=#aaaaaa> Font type like bold and italic.</font></html>";
}

COMPLETION:completionKey: {
    text1:        "recursive";
    description1: "<html><b><font color=blue>recursive</font></b> <font color=#aaaaaa> Set true if this completion should be defined for all embeded grammar rules.</font></html>";
    text2:        "text";
    description2: "<html><b><font color=blue>text</font></b> <font color=#aaaaaa> Text to be inserted.</font></html>";
    text3:        "description";
    description3: "<html><b><font color=blue>description</font></b> <font color=#aaaaaa> HTML description of this option.</font></html>";
    text4:        "icon";
    description4: "<html><b><font color=blue>icon</font></b> <font color=#aaaaaa> Icon.</font></html>";
}

COMPLETION:navigatorKey: {
    text1:        "display_name";
    description1: "<html><b><font color=blue>display_name</font></b> <font color=#aaaaaa> text to be displayed in Navigator.</font></html>";
    text2:        "tooltip";
    description2: "<html><b><font color=blue>tooltip</font></b> <font color=#aaaaaa> Tooltip.</font></html>";
    text3:        "icon";
    description3: "<html><b><font color=blue>icon</font></b> <font color=#aaaaaa> Icon.</font></html>";
}

COMPLETION:importKey: {
    text1:        "state";
    description1: "<html><b><font color=blue>state</font></b> <font color=#aaaaaa> text to be displayed in Navigator.</font></html>";
    text2:        "tooltip";
    description2: "<html><b><font color=blue>tooltip</font></b> <font color=#aaaaaa> Tooltip.</font></html>";
    text3:        "icon";
    description3: "<html><b><font color=blue>icon</font></b> <font color=#aaaaaa> Icon.</font></html>";
}


MARK:ERROR: {
    type:"Error";
    message:"Syntax error.";
}

MARK:error: {
    type:"Error";
    message:"Unexpected character.";
}
