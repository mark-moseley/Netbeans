<?xml version="1.0" encoding="UTF-8"?>
<project name="servicetag" default="build" basedir=".">
	<target name="clean">
		<delete dir="build"/>
		<delete dir="dist"/>
        </target>

        <target name="build" depends="clean,compile,jar"/>

        <target name="compile" depends="clean">
        	<mkdir dir="build"/>
		<javac 
            		srcdir="${basedir}/../../../../../../reglib/src:${basedir}/src" 
            		destdir="build"
            		debug="true"/>	
		<copy todir="build">
                    <fileset dir="${basedir}/../../../../../../reglib/src" excludes="**/*.java" includes="**"/>
                </copy>
		<copy todir="build">
                    <fileset dir="${basedir}/src" excludes="**/*.java" includes="**"/>
                </copy>

        </target>

        <target name="jar" depends="compile">
		<mkdir dir="dist"/>
		<mkdir dir="build/META-INF"/>

		<echo file="build/META-INF/MANIFEST.MF">Manifest-Version: 1.0
Main-Class: org.netbeans.installer.mac.ServiceTagGenerator</echo>
		<jar destfile="dist/servicetag.jar"
		     basedir="build"
		     compress="true"                     
		     manifest="build/META-INF/MANIFEST.MF"/>
        </target>
</project>
