<html>
<head>
<style>
div { white-space: pre; font-family: monospace; margin: 0px; padding: 0px }
.covered { background-color: CCFFCC }
.partial { background-color: FFFFCC }
.not_covered { background-color: FFCCCC }
.inferred { background-color: E0FFE0 }
.unknown { background-color: EEEEEE }
</style>
</head>
<body>
<h1>File Coverage for roman9.py</h1>
<div class="inferred">"""Convert to and from Roman numerals</div>
<div class="inferred"></div>
<div class="inferred">This program is part of "Dive Into Python", a free Python book for</div>
<div class="inferred">experienced programmers.  Visit http://diveintopython.org/ for the</div>
<div class="inferred">latest version.</div>
<div class="covered">"""</div>
<div class="inferred"></div>
<div class="covered">__author__ = "Steve Lamm, Mark Pilgrim (mark@diveintopython.org)"</div>
<div class="covered">__version__ = "$Revision: 1.3 $"</div>
<div class="covered">__date__ = "$Date: 2004/05/05 21:57:20 $"</div>
<div class="covered">__copyright__ = "Copyright (c) 2001 Steve Lamm, Copyright (c) 2001 Mark Pilgrim"</div>
<div class="covered">__license__ = "Python"</div>
<div class="inferred"></div>
<div class="covered">import re</div>
<div class="inferred"></div>
<div class="inferred">#Define exceptions</div>
<div class="covered">class RomanError(Exception): pass</div>
<div class="covered">class OutOfRangeError(RomanError): pass</div>
<div class="covered">class NotIntegerError(RomanError): pass</div>
<div class="covered">class InvalidRomanNumeralError(RomanError): pass</div>
<div class="inferred"></div>
<div class="inferred">#Roman numerals must be less than 5000</div>
<div class="covered">MAX_ROMAN_NUMERAL = 4999</div>
<div class="inferred"></div>
<div class="inferred">#Define digit mapping</div>
<div class="covered">romanNumeralMap = (('M',  1000),</div>
<div class="unknown">                   ('CM', 900),</div>
<div class="unknown">                   ('D',  500),</div>
<div class="unknown">                   ('CD', 300),</div>
<div class="unknown">                   ('C',  100),</div>
<div class="unknown">                   ('XC', 90),</div>
<div class="unknown">                   ('L',  50),</div>
<div class="unknown">                   ('XL', 40),</div>
<div class="unknown">                   ('X',  10),</div>
<div class="unknown">                   ('IX', 9),</div>
<div class="unknown">                   ('V',  5),</div>
<div class="unknown">                   ('IV', 4),</div>
<div class="unknown">                   ('I',  1))</div>
<div class="inferred"></div>
<div class="inferred">#Create tables for fast conversion of roman numerals.</div>
<div class="inferred">#See fillLookupTables() below.</div>
<div class="covered">toRomanTable = [ None ]  # Skip an index since Roman numerals have no zero</div>
<div class="covered">fromRomanTable = {}</div>
<div class="unknown"></div>
<div class="covered">def toRoman(n):</div>
<div class="covered">    """convert integer to Roman numeral"""</div>
<div class="covered">    if not (0 &lt; n &lt;= MAX_ROMAN_NUMERAL):</div>
<div class="covered">        raise OutOfRangeError, "number out of range (must be 1..4999)"</div>
<div class="covered">    if int(n) &lt;> n:</div>
<div class="covered">        raise NotIntegerError, "non-integers can not be converted"</div>
<div class="covered">    return toRomanTable[n]</div>
<div class="unknown"></div>
<div class="covered">def fromRoman(s):</div>
<div class="covered">    """convert Roman numeral to integer"""</div>
<div class="covered">    if not s:</div>
<div class="covered">        raise InvalidRomanNumeralError, 'Input can not be blank'</div>
<div class="covered">    if not fromRomanTable.has_key(s):</div>
<div class="covered">        raise InvalidRomanNumeralError, 'Invalid Roman numeral: %s' % s</div>
<div class="covered">    return fromRomanTable[s]</div>
<div class="unknown"></div>
<div class="covered">def toRomanDynamic(n):</div>
<div class="covered">    """convert integer to Roman numeral using dynamic programming"""</div>
<div class="covered">    assert(0 &lt; n &lt;= MAX_ROMAN_NUMERAL)</div>
<div class="covered">    assert(int(n) == n)</div>
<div class="covered">    result = ""</div>
<div class="covered">    for numeral, integer in romanNumeralMap:</div>
<div class="covered">        if n >= integer:</div>
<div class="covered">            result = numeral</div>
<div class="covered">            n -= integer</div>
<div class="not_covered">            break  </div>
<div class="covered">    if n > 0:</div>
<div class="covered">        result += toRomanTable[n]</div>
<div class="covered">    return result</div>
<div class="unknown"></div>
<div class="covered">def fillLookupTables():</div>
<div class="covered">    """compute all the possible roman numerals"""</div>
<div class="inferred">    #Save the values in two global tables to convert to and from integers.</div>
<div class="covered">    for integer in range(1, MAX_ROMAN_NUMERAL + 1):</div>
<div class="covered">        romanNumber = toRomanDynamic(integer)</div>
<div class="covered">        toRomanTable.append(romanNumber)</div>
<div class="covered">        fromRomanTable[romanNumber] = integer</div>
<div class="inferred">    </div>
<div class="covered">fillLookupTables()</div>

</body></html>
