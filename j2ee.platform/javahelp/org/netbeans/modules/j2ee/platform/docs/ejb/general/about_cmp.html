 
<html>

<!--
  *     Copyright © 2007 Sun Microsystems, Inc. All rights reserved.
  *     Use is subject to license terms.
-->
<head>


<title>About EJB 2.1 CMP Mappings</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="StyleSheet" href="nbdocs://org.netbeans.modules.j2ee.platform/org/netbeans/modules/usersguide/ide.css" type="text/css">

</head>
<body>
<h2>About EJB 2.1 CMP Mappings</h2>
<p><small><a href="#seealso">See Also</a></small></p>
<p>The term container-managed persistence (CMP) means that the EJB container handles 
  all database access required by the entity bean. When coding to the J2EE 1.4 specification,
  you create CMP entity beans and then describe how the entity beans are mapped to tables in your database
  in a <object classid="java:com.sun.java.help.impl.JHSecondaryViewer">
    <param name="content" value="../../glossary/deploymentdesc.html">
    <param name="viewerActivator" value="javax.help.LinkLabel">
    <param name="viewerStyle" value="javax.help.Popup">
    <param name="viewerSize" value="400,220">
    <param name="text" value="deployment descriptor">
    <param name="textFontSize" value="medium">
    <param name="textFontFamily" value="SansSerif">
    <param name="textFontStyle" value="italic">
    <param name="textFontWeight" value="bold">
    <param name="textColor" value="blue">
  </object>.</p>
  
  
  <p>If you are deploying to the Sun Java System Application Server, the CMP mappings 
  for your EJB module are specified in the <tt>sun-cmp-mappings.xml</tt> descriptor file in the 
  module's <tt>src/conf</tt> directory.
  If you generate CMP entity beans from a datasource, the IDE generates <tt>sun-cmp-mappings.xml</tt> for you when 
  you create the CMP entity beans.
  To edit CMP mappings, you need to open <tt>sun-cmp-mappings.xml</tt> in the XML editor.</p>
  
  <ul class="note">
      <li>If you are deploying to another application server, you have to edit the CMP mappings in the deployment descriptor specific to that server.</li>
  </ul>
      
  <p>The <tt>sun-cmp-mapping.xml</tt> descriptor file describes how 
  the entity beans, CMP fields and CMR relationships are mapped to the database. 
  The bean's code contains no database access (SQL) calls. 
  As a result, the bean's code is not tied to a specific 
  persistent storage mechanism (database). Because of this flexibility, even if 
  you redeploy the same entity bean to different J2EE servers that use different 
  databases, you do not need to modify or recompile the bean's code. This makes 
  your entity beans more portable.</p>
  
  <ul class="tip">
    <li>If you are coding a Java EE 5 EJB module, you use <a href="../../persistence/general/persistence_about.html">
    Java Persistence API entity</a> classes instead of entity beans.</li>
</ul>

<p>In order to generate the data access calls, you have to provide a schema that 
  defines the bean's persistent fields and relationships. Your CMP entity beans 
  mirror the structure of your database. The beans' CMP fields correspond to the 
  columns in the database tables and the relationship fields correspond to foreign 
  keys in the database.</p>
  
<h3>Configuring CMP Mappings in the IDE</h3>
<p>If you are deploying to the Sun Java System Application Server, the IDE can 
  assist you in generating CMP mappings. If you are deploying 
  to a different application server, you have to configure CMP mappings yourself 
  by editing the server-specific deployment descriptors.</p>
<p>There are three strategies for working with CMP mappings in the IDE:</p>
<ul>
  <li><b>Bottom-up.</b> You can start with an existing database or database schema 
    and generate CMP entity beans. The IDE automatically captures the database 
    schema if necessary, configures the CMP fields and relationship fields, and 
    sets up the CMP mappings.</li>
  <li><b>Top-down.</b> You can create a set of CMP entity beans and define the 
    CMP fields and relationships by hand. You then configure the application to 
    create the database tables when you deploy it. </li>
  <li><b>Meet in the middle.</b> If you have both existing CMP beans and a database 
    schema, you can map the beans to the database schema and then edit
    <tt>sun-cmp-mapping.xml</tt> to map more complicated fields
    like relationships and CMP fields that map to multiple columns.</li>
</ul>
<dl> 
  <dt>See Also<a name="seealso"></a></dt>
  <dd><a href="../editing/define_cmp_field.html">Defining a CMP Field</a></dd>
  <dd><a href="../editing/generate_cmp_beans.html">Generating CMP Entity Beans from a Database</a></dd>
  <dd><a href="nbdocs://org.netbeans.modules.dbschema/org/netbeans/modules/dbschema/docs/dbschema.html">Obtaining a Database Schema</a></dd>
  <dd><a href="nbdocs://org.netbeans.modules.j2ee.sun.appsrv81/org/netbeans/modules/j2ee/sun/ide/docs/cmp/map_bean_to_db.html">Configuring CMP Mappings</a></dd>
  <dd><a href="nbdocs://org.netbeans.modules.j2ee.sun.appsrv81/org/netbeans/modules/j2ee/sun/ide/docs/cmp/fields_mult_cols.html">Mapping CMP Fields to Multiple Columns</a> </dd>
  <dd><a href="nbdocs://org.netbeans.modules.j2ee.sun.appsrv81/org/netbeans/modules/j2ee/sun/ide/docs/cmp/prim_sec_tables.html">Specifying Primary and Secondary Tables</a> </dd>
  <dd><a href="nbdocs://org.netbeans.modules.j2ee.sun.appsrv81/org/netbeans/modules/j2ee/sun/ide/docs/cmp/map_rel_fields.html">Mapping Relationship Fields</a> </dd>
  <dd><a href="nbdocs://org.netbeans.modules.j2ee.sun.appsrv81/org/netbeans/modules/j2ee/sun/ide/docs/cmp/gen_tables.html">Generating Database Tables at Deployment</a></dd>
</dl>
<hr>
<small> <a href="../../credits.html">Legal Notices</a></small> 
<table cellpadding="50" border="0">
   <tr><td>&nbsp;</td></tr> 
   </table> 
</body>

</html>
