 
<html>

<!--
  *     Copyright © 2007 Sun Microsystems, Inc. All rights reserved.
  *     Use is subject to license terms.
-->
<head>
<title>Managing Container-Managed Relationships</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="nbdocs:/org/netbeans/modules/usersguide/ide.css" type="text/css">
</head>
<body>
<h2>Managing Container-Managed Relationships</h2>
<p><small><a href="#seealso">See Also</a></small></p>
    <p>CMP relationships are managed by the container based on how the relationships are described
    in the <tt>ejb-jar.xml</tt> general deployment descriptor. </p>    

<p><b>To modify CMP relationships in <tt>ejb-jar.xml</tt>:</b></p>
<ol>
  <li>In the Projects window, expand the Configuration Files node for the EJB 
    module project and double-click <tt>ejb-jar.xml</tt>.</li>
  <li>In the top of the graphical editor, click CMP Relationships. 
  <p>The visual editor displays a table of the existing container-managed relationships for the EJB module. 
  </li>
  <li>Double-click the name of the relationship in the table to open the Edit CMP Relationship dialog box.</li>
  <li>Edit the relationship description properties in the dialog box.</li>
  <li>Click OK.</li>
</ol>
<ul class="note">
    <li>When you edit the relationship in <tt>ejb-jar.xml</tt>, you may also need 
    to make corresponding changes in your source code.</li>
</ul>

<p><b>To remove a CMP relationship in <tt>ejb-jar.xml</tt>:</b></p>
<ol>
  <li>In the Projects window, expand the Configuration Files node for the EJB 
    module project and double-click <tt>ejb-jar.xml</tt>.</li>
  <li>In the top of the graphical editor, click CMP Relationships. 
  <p>The visual editor displays a table of the existing container-managed relationships for the EJB module. 
  </li>
  <li>Select the name of the relationship in the table and click Remove</li>
</ol>

<h3>Creating a CMP Relationship</h3>
<p>If you are you are generating CMP entity beans from scratch and need to specify the CMP relationships for 
    your application, you need to edit the deployment descriptor file in the XML editor.
    You also need to make the corresponding changes in your source code. 
    When working with CMP entity beans, the IDE does not update your source code based on changes you make in <tt>ejb-jar.xml</tt>.</p>
<p><b>To create new CMP relationships in <tt>ejb-jar.xml</tt>:</b></p>
<ol>
  <li>In the Projects window, expand the Configuration Files node for the EJB 
    module project and double-click <tt>ejb-jar.xml</tt>.</li>
    <li>Click the XML tab and edit the deployment descriptor file in the XML editor.</li>
</ol>

<p>Each CMP relationship requires the following.</p> 
<ul>
    <li>A relationship name.</li>
    <li>Each end of the relationships requires that the following is defined.
    <ul>
      <li>A distinct name for the relationship role and the entity bean in which 
        the relationship begins or ends.</li>
      <li>The multiplicity of the relationship. </li>
      <li>Whether cascade delete is enabled for the either side of the relationship. 
        When you enable cascade delete for a bean in a relationship, deleting 
        the bean also deletes the bean it is related to.</li>
      <li>Whether to create a Container-Managed Relationship (CMR) field for the 
        bean. If you create a CMR field, the application server can search for 
        and return instances of the bean field references. The name of the 
        class must begin with a lower-case letter.</li>
      <li>The return type of the CMR field. If the multiplicity of the bean it 
        is returning is one, you do not have to specify a return type. The application 
        server automatically returns the enterprise bean's interface. 
        <p> If the multiplicity is set to many, you can choose whether to return 
          <tt>java.util.Set</tt> or <tt>java.util.Collection</tt>. Choose <tt>java.util.Set</tt> 
          if the returned beans cannot be duplicates. Choose <tt>java.util.Collection</tt> 
          if the returned beans can include duplicates. 
      </li>
    </ul>
    </li>
</ul>

  
  <b>Notes:</b> 
  <ul>
  <li>When you generate CMP entity beans from a database, the IDE automatically 
    registers all of the container-managed relationships based on the relationships 
    in the database.</li>
  <li>Changes in the <tt>ejb-jar.xml</tt> deployment descriptor can result in 
    automatic or necessary changes in the corresponding application server-specific 
    deployment descriptors. For example, when you add a relationship in <tt>ejb-jar.xml</tt>, 
    you have to map it to a real database in the server-specific deployment descriptor.</li>
  <li>You should exercise caution when editing deployment descriptors in XML and always validate your XML file to avoid errors.</li>

</ul>

<p>For a complete list of configurable properties for
    all J2EE module types, see "Appendix A
    Deployment Descriptor Files" in
    the Sun Java System Application Server Developer's
    Guide. </p>
    <p><object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
        <param name="content" value="http://docs.sun.com/source/819-0079/dgdesc.html">
        <param name="text" value="<html><u>http://docs.sun.com/source/819-0079/dgdesc.html</u></html>">
        <param name="textFontSize" value="medium">
        <param name="textColor" value="blue">
    </object></p>
    
    <p>For a detailed description of CMP entity bean specifications, see the Enterprise JavaBeans Specification, v2.1.</p>
    <p><object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
        <param name="content" value="http://java.sun.com/products/ejb/docs.html">
        <param name="text" value="<html><u>http://java.sun.com/products/ejb/docs.html</u></html>">
        <param name="textFontSize" value="medium">
        <param name="textColor" value="blue">
    </object></p>
    
    <dl>
    <dt><a name="seealso">See Also</a></dt>
  <dd><a href="../general/about_deployment_descriptors.html">About Deployment Descriptors</a></dd>
  <dd><a href="config_ejb_dd.html">Configuring EJB Deployment Descriptors</a></dd>
  <dd><a href="config_ejb_about.html">About Configuring EJB Modules</a></dd>
  <dd><a href="../editing/generate_cmp_beans.html">Generating CMP Entity Beans from a Database</a></dd>
</dl>
<hr>
<small><a href="../../credits.html">Legal Notices</a></small> 
<table cellpadding="50" border="0"> 
<tr><td>&nbsp;</td></tr>
</table>
</body>
</html>