<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
 *     	  Copyright © 2004 Sun Microsystems, Inc. All rights reserved. 
 *	  Use is subject to license terms.
-->

<html>
<head>
<meta name="lastupdated" content="4Feb04">
<!-- p1 -->

<title>Reconfiguring a Tomcat Server</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="StyleSheet" href="nbdocs:/org/netbeans/modules/usersguide/ide.css" type="text/css">
</head>
<body>

<h2>Reconfiguring a Tomcat Server</h2>
<p><small> 
<a href="#seealso">See Also</a> 
</small></p> 
<p>The main configuration file for Tomcat is the <code>server.xml</code> file. 
  It provides configuration information for Tomcat components and specifies deployment 
  information for the server. For simple web applications, editing the <code>server.xml</code> 
  file is not necessary because the IDE makes the necessary changes automatically. 
  Most edits to the server configuration file can be achieved by editing the properties 
  for the Tomcat Server node, or by using menu 
  commands in the Projects window, Files window, and Runtime window. </p>
<p>Editing is usually necessary only for advanced configuration, such as setting 
  up authentication based on JNDI or database lookups. For more information about 
  configuring Tomcat, see:
<p><object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
        <param name="content" value="http://jakarta.apache.org/tomcat/tomcat-5.0-doc/config/index.html">
        <param name="text" value="<html><u>http://jakarta.apache.org/tomcat/tomcat-5.0-doc/config/index.html</u></html>">
        <param name="textFontSize" value="medium">
        <param name="textColor" value="blue">
</object>
</p>
<p>The <tt>server.xml</tt> file can be in one of two places. Typically, you edit 
  the <tt>server.xml</tt> file that is in the <i>tomcat-installation-dir</i><tt>/conf 
  </tt>directory. However, if the server node's property sheet shows a base directory 
  path that is different from the home directory path, then you must edit the 
  <tt>server.xml</tt> file that is in the <i>base-dir</i><tt>/conf</tt> directory.</p>

<p>You can edit the <tt>server.xml</tt> file that is in the <i>base-dir</i><tt>/conf</tt> directory
   by using the Tomcat Manager or the Source Editor. It is recommended that only advanced users
   edit the <tt>server.xml</tt> file in the Source Editor.</p>

<p><b>To access the Tomcat Admintool:</b>
<ol><li>In the Runtime window, expand the Server Registry node and the Tomcat 5 Servers node.</li>
<li>If the text to the right of the Tomcat instance node does not end with "[running]",
start the server by right-clicking the Tomcat instance node and choosing Start/Stop Server.
Click Start Server.</li>
  <li>Expand the Web Applications node. Right-click the node for the <tt>/admin</tt> 
    context and choose Open in Browser. The Tomcat Server Administration Tool 
    opens in the IDE's default web browser.</li>
<li>Type a User Name and Password for a Tomcat user to whom the "admin" role has been assigned. Click login.
The "Tomcat Web Server Administration Tool" (the Admin tool) should open
in the IDE's default web browser.

<table>
  <tr> 
    <td valign="top"><img src="../images/warn.gif" width="16" height="16"></td>
    <td valign=top align=left><p>If the Admin tool does not
open, or if you don't have a user name or password, check the <tt>tomcat-users.xml</tt> file
in Tomcat's base directory. To identify the location of this directory, right-click
the Tomcat Server instance node in the Runtime window and select Properties.
In the Properties dialog box, the Base Directory property points to 
Tomcat's base directory.</p><p>In the <tt>tomcat-users.xml</tt> file in Tomcat's base
 directory, check 
that a role called "admin" exists and that the role is assigned
to a user. If necessary, define the "admin" role, assign the "admin" role to a user, save the file,
and, using the Runtime tab, stop and restart the Tomcat instance.</p></td>
  </tr>
</table>

</li>
<li>Make your changes. For example, <a href="tomcat_setup_tdcp.html ">add a data source to a context</a>.</li>
<li>Click Save. Then click Commit Changes. Then click Log Out.</li>
</ol>
<p><b>To edit the server.xml file in the Source Editor:</b>
</p><ol>
<li>In the Runtime window, expand the Server Registry node and the Tomcat 5 Servers node.</li>
<li>If the text to the right of the Tomcat instance node ends with "[running]",
stop the server by right-clicking the Tomcat instance node and choosing Start/Stop Server.
Click Stop Server.</li>
<li>Right-click the Tomcat instance node and 
choose Edit server.xml from the contextual menu to open the <tt>server.xml</tt>

file in the Source Editor.</li>
</ol>	
<table>
  <tbody><tr> 
    <td valign="top"><img src="../images/warn.gif" width="16" height="16"></td>
    <td valign="top" align="left">Be aware that you hand-edit the <code>server.xml
      </code> file at your own risk; the IDE cannot repair a damaged <code>server.xml</code> 
      file. You are strongly encouraged to create a backup version of your working 
      <code>server.xml</code> file before beginning to edit by hand.</td>
  </tr>

</tbody></table>

<table>

  <tr> 

    <th colspan=2 align=left><a name="seealso">See Also</a></th>

  </tr>

  <tr> 

    <td width="23"></td>

<td><a href="tomcat_plugintro.html">About the Tomcat Server</a><br>
<a href="tomcat_top_node.html">Viewing a Tomcat Server in the IDE</a><br>
<a href="tomcat_context_add.html">Setting a Context Path for a Web Application</a><br>
<a href="tomcat_start.html">Starting and Stopping a Tomcat Server</a><br>
<a href="tomcat_internal_props.html">Customizing a Tomcat Server</a><br>
<a href="tomcat_setup_tdcp.html ">Setting Up a Tomcat Database Connection Pool</a><br>
<a href="tomcat_use_tdcp.html">Connection Pooling from a JSP Page</a><br>
<a href="tomcat_addinstall.html">Adding a Tomcat Server</a><br></td>
  </tr>

</table>
<hr>
<small><a href="../credits.html">Legal Notices</a> 
<table cellpadding="20" border="0"> 
<tr><td>&nbsp;</td></tr> 
<tr><td>&nbsp;</td></tr> 
<tr><td>&nbsp;</td></tr> 
</table> 

</small></body></html>
