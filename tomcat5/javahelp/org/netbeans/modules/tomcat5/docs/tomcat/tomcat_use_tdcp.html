<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
 *     	  Copyright © 2004 Sun Microsystems, Inc. All rights reserved. 
 *	  Use is subject to license terms.
-->

<html>
<head>
<meta name="lastupdated" content="4Feb04">
<!-- p1 -->

<title>Using a Tomcat Database Connection Pool</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="StyleSheet" href="nbdocs:/org/netbeans/modules/usersguide/ide.css" type="text/css">
</head>
<body>

<h2>Using a Tomcat Database Connection Pool</h2>
<p><small> 
<a href="#seealso">See Also</a> 
</small></p> 

<p>There are many ways of using a <a href="tomcat_setup_tdcp.html">data source</a> in a web application. The simplest 
way is to access your data source directly from a JSP file using the JSTL 1.1 tag library. You are recommended
 to use this method for
 testing purposes and in small web applications only.
 <p><b>To add the JSTL 1.1 tag library to your web project:</b></p>
 <ol>
 <li>Right-click the project node in the Projects window and choose Properties.</li>
 <li>Select Compiling Sources and click Add Library. Your libraries, as well as those that are bundled with NetBeans 4.0 are displayed. JSTL 1.1 is one of the bundled libraries.</li>
  <li>Select JSTL 1.1 and click Add Library. Your newly selected library is displayed in the Project Properties dialog box. This means that the JSTL library is in the classpath. You need to package JSTL with your web application, therefore leave the check box selected. The IDE copies the library to the web application's WEB-INF/lib folder.</li>
  <li>Click OK to close the Project Properties dialog box.</li>
</ol>
<p><b>To set up a JSP to use the JSTL 1.1 tag library to access a data source:</b></p>
<ol>
        <li>Expand the project node and the Web Pages node. </li>
	<li>Double-click the index.jsp node. The JSP file opens in the Source Editor. </li>
<li>You need to let the web server know that the JSP page uses tags from JSTL's <tt>CORE</tt> 
  component and JSTL's <tt>SQL</tt> component. Paste or type the following <tt>taglib</tt> 
  directives after the <tt>page</tt> directives, which are at the top of your JSP file:
          

 <blockquote> 
	       <pre> &lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;<br> &lt;%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql" %&gt;<br></pre>

 </blockquote></li>

 
 
<li>To make the JSP page display the retrieved data in a table, paste or type the following code into the body,
            to replace the content between the default <tt>&lt;body&gt;</tt> tags: </li>
<pre>           &lt;table border=1&gt;<br>             &lt;tr&gt;<br>                &lt;th&gt;First&lt;/th&gt;&lt;th&gt;Last&lt;/th&gt;<br>             &lt;/tr&gt;<br>             &lt;c:forEach var="row" items="${queryresults.rows}"&gt;<br>                &lt;tr&gt;<br>                    &lt;td&gt;&lt;c:out value="${row.f_name}" /&gt;&lt;/td&gt;<br>                    &lt;td&gt;&lt;c:out value="${row.l_name}" /&gt;&lt;/td&gt;<br>                &lt;/tr&gt;<br>             &lt;/c:forEach&gt;<br>           &lt;/table&gt;</pre>
</li>
	    
</ol>
<p><b>To access a data source:</b></p>
<ol>
<li><a href="tomcat_setup_tdcp.html">Set up a Tomcat Database Connection Pool</a>.</li>
<li>Modify the JSP file to enable the selection of database records. 
Make sure to specify the same JNDI name as specified in the data source above. 
To do so, paste or type code similar to the following below the taglib directives in a JSP file:
 <blockquote>
    <pre>         &lt;sql:query var="queryresults" dataSource="jdbc/poolDB"&gt;<br>           SELECT * FROM employee_data ORDER BY upper(f_name)<br>         &lt;/sql:query&gt;</pre>

  </blockquote></li>
<li>Make the database driver available to Tomcat connection pooling 
by copying the database driver's JAR file
into Tomcat's <tt>common/lib</tt> folder. By default, this 
folder is within the <tt>C:\Program Files\netbeans-4.0\nb4.0 folder</tt>.</p>
<p>If you have already started the Tomcat Server, make sure that you restart it after you copy the database
driver's JAR file to Tomcat's <tt>common/lib</tt> folder, so that the Tomcat Server can load the JAR file.</p></li>
</ol>
<table>

  <tr> 

    <th colspan=2 align=left><a name="seealso">See Also</a></th>

  </tr>

  <tr> 

    <td width="23"></td>
<td><a href="tomcat_plugintro.html">About the Tomcat Server</a><br>
<a href="tomcat_top_node.html">Viewing a Tomcat Server in the IDE</a><br>
<a href="tomcat_context_add.html">Setting a Context Path for a Web Application</a><br>
<a href="tomcat_start.html">Starting and Stopping a Tomcat Server</a><br>
<a href="tomcat_internal_props.html">Customizing a Tomcat Server</a><br>
<a href="tomcat_edit_config.html">Reconfiguring a Tomcat Server</a><br>
<a href="tomcat_setup_tdcp.html">Setting Up a Tomcat Database Connection Pool</a><br>
<a href="tomcat_addinstall.html">Adding a Tomcat Server</a><br></td>
  </tr>

</table>
<hr>
<small><a href="../credits.html">Legal Notices</a> 
<table cellpadding="20" border="0"> 
<tr><td>&nbsp;</td></tr> 
<tr><td>&nbsp;</td></tr> 
<tr><td>&nbsp;</td></tr> 
</table> 

</small></body></html>
