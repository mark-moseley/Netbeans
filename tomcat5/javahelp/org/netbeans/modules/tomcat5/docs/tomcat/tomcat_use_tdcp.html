<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
 *     	  Copyright © 2005 Sun Microsystems, Inc. All rights reserved. 
 *	  Use is subject to license terms.
-->

<html>
<head>
<meta name="lastupdated" content="4Feb04">
<!-- p1 -->

<title>Using a Tomcat Connection Pool in a JSP Page</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="StyleSheet" href="nbdocs:/org/netbeans/modules/usersguide/ide.css" type="text/css">
</head>
<body>

<h2>Defining a Tomcat Database Connection Pool in a JSP File</h2>
<p><small> 
<a href="#seealso">See Also</a> 
</small></p> 

<p>There are many ways of using a 
<a href="tomcat_setup_tdcp.html">JDBC resource</a> (also known as a data source) in a web application. The simplest 
way is to access your JDBC resource directly from a JSP file using the JSTL 1.1 tag library. You are recommended
 to use this method for
 testing purposes and in small web applications only.</p>
<p><b>To set up a JSP file to use the JSTL 1.1 tag library to access a data source:</b></p>
<ol>
<li><a href="tomcat_setup_tdcp.html">Set up a Tomcat Database Connection Pool</a>.</li>
<li>Put the JSTL 1.1 tag library on the web project's 
<a href="nbdocs:/org/netbeans/modules/usersguide/compile/comp_classpath.html">classpath</a>. When you do so,
make sure that the Deploy checkbox is selected so that the library is packaged with the web project
 when you build it.
<li>Expand the project node and the Web Pages node 
and double-click the default index.jsp node. (Instead of using the
 default <tt>index.jsp</tt> file, you can 
 <a href="nbdocs:/org/netbeans/modules/j2ee/platform/docs/web/create/jsp/jsp_create.html">create</a> your own JSP file.)
 The JSP file opens in the Source Editor.
Now modify the JSP file to do the following:</p>
<ul><li>Let the Tomcat Web Server know that the JSP page uses tags from JSTL's <tt>CORE</tt> 
	component and JSTL's <tt>SQL</tt> component. Paste or type the following near the top of
        the JSP file, but below the <tt>page</tt> directives:
          
<pre>   &lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
   &lt;%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql" %&gt;</pre></li>
  <li>Query the database. 
Make sure to specify the same JNDI name as specified in the <a href="tomcat_setup_tdcp.html">JDBC resource</a>. 
To do so, paste or type code similar to the following below the taglib directives in a JSP file:

<pre>   &lt;sql:query var="queryresults" dataSource="jdbc/poolDB"&gt;
      SELECT * FROM employee_data ORDER BY upper(f_name)
   &lt;/sql:query&gt;</pre></li>

<li>Do something with the queried data. 
 For example, to display the data in a table, replace the
 content between the default <tt>&lt;body&gt;</tt> tags by pasting or typing
 the following code into the body:
<pre>  &lt;table border=1&gt;
    &lt;tr&gt;
      &lt;th&gt;First&lt;/th&gt;&lt;th&gt;Last&lt;/th&gt;
    &lt;/tr&gt;
    &lt;c:forEach var="row" items="${queryresults.rows}"&gt;
      &lt;tr&gt;
       &lt;td&gt;&lt;c:out value="${row.f_name}" /&gt;&lt;/td&gt;
       &lt;td&gt;&lt;c:out value="${row.l_name}" /&gt;&lt;/td&gt;
      &lt;/tr&gt;
   &lt;/c:forEach&gt;
  &lt;/table&gt;</pre>
 </li></ul>
<li>Make the database driver available to Tomcat connection pooling 
by copying the database driver's JAR file
into Tomcat's <tt>common/lib</tt> folder, within
the IDE's installation folder.</p>
<table cellpadding="3" cellspacing="0" border="0">
  <tr valign="top">
      <td><img src="../images/tip.gif" alt="tip">&nbsp;</td>
      <td>
	If you have already started the Tomcat Web Server, make sure that you restart it after you copy the database
driver's JAR file to Tomcat's <tt>common/lib</tt> folder, so that the Tomcat Web Server can load the JAR file.
      </td>
   </tr>
</table></li>
<li><a href="nbdocs:/org/netbeans/modules/j2ee/platform/docs/web/create/jsp/jsp_run.html">Run the JSP file</a> or 
<a href="nbdocs:/org/netbeans/modules/j2ee/platform/docs/web/deploy/deploy_webapp.html">deploy the web application</a> that contains it.</li>
</ol>
<table>

  <tr> 

    <th colspan=2 align=left><a name="seealso">See Also</a></th>

  </tr>

  <tr> 

    <td width="23"></td>
<td><a href="tomcat_plugintro.html">About the Tomcat Web Server</a><br>
	<a href="tomcat_edit_tomcatuser.html">Authenticating the Tomcat Web Server</a><br></a>
<a href="tomcat_setup_tdcp.html">Setting Up a Tomcat Database Connection Pool</a><br></a>
  </tr>

</table>
<hr>
<small><a href="../credits.html">Legal Notices</a> 
<table cellpadding="20" border="0"> 
<tr><td>&nbsp;</td></tr> 
<tr><td>&nbsp;</td></tr> 
<tr><td>&nbsp;</td></tr> 
</table> 

</small></body></html>
