<?xml version="1.0" encoding="UTF-8"?>

<project basedir="." default="all" name="build-unit">
    <import file="../../../nbbuild/default.xml"/>
    <property file="../../../nbbuild/directories.properties"/>

    <path id="compiletest.classpath">   
        <pathelement location="${core.dir}/${nb.lib.dir}/org-netbeans-swing-plaf.jar"/>
        <pathelement location="${core.dir}/${nb.modules.dir}/org-netbeans-swing-tabcontrol.jar"/>
        <pathelement location="${core.dir}/${nb.lib.dir}/core.jar"/>
        <pathelement location="${core.dir}/${nb.lib/ext.dir}/boot.jar"/>
        <pathelement location="${openide.dir}/${nb.lib.dir}/openide.jar"/>
        <!-- XXX -->
        <pathelement location="${openide/loaders.dir}/${nb.lib.dir}/openide-loaders.jar"/>
        <pathelement location="${openide/compiler.dir}/${nb.modules/autoload.dir}/openide-compiler.jar"/>
        <pathelement location="${openide/execution.dir}/${nb.modules.dir}/org-openide-execution.jar"/>
        <pathelement location="${openide/io.dir}/${nb.modules.dir}/org-openide-io.jar"/> 
    </path>
    
    <path id="codetest.classpath">
        <pathelement location="${core.dir}/${nb.lib.dir}/core.jar"/>
        <pathelement location="${core.dir}/${nb.lib/ext.dir}/boot.jar"/>
        <pathelement location="${openide.dir}/${nb.lib.dir}/openide.jar"/>
        <pathelement location="${core.dir}/${nb.lib.dir}/org-netbeans-swing-plaf.jar"/>
        <pathelement location="${core.dir}/${nb.modules.dir}/org-netbeans-swing-tabcontrol.jar"/>
        <pathelement location="${core/windows.dir}/${nb.modules.dir}/org-netbeans-core-windows.jar"/>
        <pathelement location="${openide/loaders.dir}/${nb.lib.dir}/openide-loaders.jar"/>
        <pathelement location="${openide/compiler.dir}/${nb.modules/autoload.dir}/openide-compiler.jar"/>
        <pathelement location="${openide/execution.dir}/${nb.modules.dir}/org-openide-execution.jar"/>
        <pathelement location="${openide/io.dir}/${nb.modules.dir}/org-openide-io.jar"/> 
        <pathelement location="${core/settings.dir}/${nb.modules.dir}/org-netbeans-modules-settings.jar"/>
        <fileset dir="${libs/xerces.dir}/${nb.modules/autoload.dir}/ext">
            <include name="xerces-*.jar"/>
            <include name="xml-commons-dom-ranges-*.jar"/>
        </fileset>
    </path>
    
    <!-- ========= -->
    <!-- Compilers -->
    <!-- ========= -->
    
    <target name="unit-compiler">
        <buildTests srcDir="unit/src" compileexcludes="**/data/**">
            <classpath refid="compiletest.classpath"/>
        </buildTests>
    </target>
    
    <!-- ========= -->
    <!-- Executors -->
    <!-- ========= -->
    
    <target name="runidetest">
        <executeTests pluginName="ide">
            <classpath/>
        </executeTests>
    </target>
    
    <target name="runcodetest">
        <executeTests pluginName="jvm">
            <classpath refid="codetest.classpath"/>
        </executeTests>
    </target>
    
</project>
