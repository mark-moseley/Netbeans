<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--       
*     Copyright Â© 2008 Sun Microsystems, Inc. All rights reserved.
*     Use is subject to license terms.
-->
<html>
<head>
    <title>Attaching to a Local Application</title>
    <link rel="StyleSheet" href="nbdocs:/org/netbeans/modules/usersguide/ide.css" type="text/css">
</head>
<body>
    <h2>Attaching to a Local Application</h2>
    <p>You can use the attach mode to profile a local application
        when you want or need to start the application outside of the IDE.
    For example, you may want to use the attach mode in the following cases:</p>
    <ul>
        <li>Your application needs to be started from the command line or uses a complex launch script</li>
        <li>You want to obtain profiling data on the startup of the appliction or target JVM</li>
        <li>You want to profile the application without restarting the application 
        (Dynamic attach mode, requires JDK 1.6)</li>
    </ul>
    
    <p>To attach to a local application, you first need to configure 
        the attachment settings using the Attach wizard. 
        These settings are associated with the project you are profiling.
        You only need to configure the attach settings for your project once, 
        but you can modify the settings at any time by stepping through the Attach wizard again.</p> 
    
    <p>When you configure the settings for attaching to a local application, 
    you can choose from the following attachment modes:</p>
    <ul>
        <li><b>Direct.</b> This mode enables you to obtain profiling data on the startup of the local application.</li>
        <li><b>Dynamic. (requires JDK 1.6)</b> This mode allows you to detach from and re-attach to the application 
        without stopping the application.</li>
    </ul>
    
    <p><b>To attach to a local application:</b></p>
    <ol>
        <li>Choose Profile &gt; Attach Profiler ( <img src="img/attach.png">&nbsp;) from the main menu to open the 
        Select Profiling Task dialog box.</li>
        <li>Select the target application from the Attach To drop-down list at the top of the dialog box.</li>
        <li>Click <b>define</b> to open the Attach Wizard to specify the Attach mode.</li>
        <li>In the Attach wizard, select the target type of the application.</li>
        <li>Select Local as the Attach Method.</li>
        <li>Select either Direct or Dynamic as the Attach Invocation. Click Next.</li>
        <li>Step through the wizard and follow the instructions for configuring the attach settings.
        Click Finish to close the wizard.</li>
        <li>In the Select Profiling Task dialog box, select a profiling task and any options.</li>
        <li>Click Attach.</li>
        </ol>
                        <!--Depending on which attachment method you specified in the Attach Wizard,
			one of the following occurs:
			<ul>
				<li>If you chose "PID" as the invocation method, clicking Attach 
				completes the attachment process.</li>
				<li>If you chose "Use Ctrl+Break" as the invocation method, 
				clicking Attach opens a progress dialog box. Go to the console 
				window of the target VM and on your keyboard hit Ctrl+Break (on Windows)
				 or Ctrl+\ (on Solaris or Linux). This sends a signal to the JVM that 
				activates the Profiler agent and starts the connection.</li>
			</ul>
				<p>Note that when you hit Ctrl+Break, the JVM prints the list of currently active Java threads with their stacks and then checks if it can start the Profiler agent. 
                                If the Working directory name you gave is correct, the VM starts this library and prints "JFluid: target app manager starting on port ...", and the progress dialog 
                                in the Profiler disappears. Otherwise, nothing happens and your application just continues running.
                You can either attach the Profiler through the console window of the target 
                application or by specifying the PID of the target application. 
                If the target application does not have a console window you will need to 
                attach Profiler using the PID.</p>
-->
    
    
    <p><b>To detach from the application:</b></p> 
    <ul>
        <li>Choose Profile &gt; Detach from the main menu or click Detach in the Profiler window.</li>
    </ul> 
    <p>When you detach from the application, the connection to the target JVM is closed.
    When you click Detach, you can choose to stop the application upon detach or allow the application to keep running.
    You can reattach to the application by choosing Profile &gt; Attach Profiler from the main menu.</p>
    
    <!--            This sends a command to deactivate the Profiler code in the target JVM and terminate the connection.
        The message <tt>connection with agent closed</tt> appears in the console window (if the target application has a console window).</p>
    -->    
    <h3>Modifying the profiling task</h3>
    <p>Once the connection is established and the profiler is attached to the target application,
    you can change the profiling task you are running on the target application without stopping or restarting the application.</p>
    <p><b>To change the profiling task without detaching:</b></p>
    <ol>
        <li>Choose Profile &gt; Modify Profiling (Alt+Shift+F2) from the main menu or click Modify Profiling
        ( <img src="img/clock-icon.png">&nbsp;) in the Profiler window.</li>
        <li>Select a new profiling command and adjust any settings.</li>
        <li>Click Run.</li>
    </ol>
    <p>The target application is instrumented again without starting or
    stopping the application.</p>
    <!--
        <ul class="note">                
            <li>If you are not sure about the startup directory of your application, 
            but know its process ID, you can send the target JVM the same 
            signal or press Ctrl+Break in its console window. After dumping the threads,
            the JVM always prints its startup directory.</li>
        </ul>
            -->    
    <dl>
        <dt><a name="seealso">See Also</a></dt>
        <dd><a href="profile_attach.html">Profiling Using Attach Mode</a></dd>
    </dl>
    <hr>
    <small><a href="../credits.html">Legal Notices</a></small>
    <table border="0" cellpadding="50">
        <tr><td>&nbsp;</td></tr>
    </table>
    
</body>
</html>
