<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--       
*     Copyright Â© 2007 Sun Microsystems, Inc. All rights reserved.
*     Use is subject to license terms.
-->
<html>
    <head>
        <title>Profiling a Local Running Application</title>
        <link rel="StyleSheet" href="nbdocs:/org/netbeans/modules/usersguide/ide.css" type="text/css">
    </head>
    <body>
        <h2>Profiling a Local Running Application</h2>
        <p>You can use the Attach mode to profile a local application without restarting the application. 
        To do this, you choose the Dynamic Attach option in the Attach wizard. This options allows you to instrument and 
        de-instrument a running program as many times as you want without restarting the application.</p>
        <ul class="note">
            <li>The Dynamic Attach option is only available if the IDE and the local application are running on JDK 1.6.</li>
        </ul>
<!--        <p>No special command line options are needed.</p>
        <p>To profile an application running on a remote machine, see the instructions
        for Direct Attachment on the Profiler website:</p>
    <p><object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
        <param name="content" value="http://profiler.netbeans.org/docs/help/attach.html">
        <param name="text" value="<html><u>http://profiler.netbeans.org/docs/help/attach.html</u></html>">
        <param name="textFontSize" value="medium">
        <param name="textColor" value="blue">
    </object></p>
    -->
<!--
        <p>When you need to profile any code in the target application, you 
        invoke a command in Profiler that sends an OS signal to the JVM that  
        loads and activates the Profiler VM-side library. You can 
        then do exactly the same things on the running application that you can do when 
        you start the application from within Profiler.</p>
    -->    
        <p><b>To profile a local running application:</b></p>
        <ol>
            <li>Configure the target JVM of the application, if necessary.</li>
            <li>Start the application on JDK 1.6.</li>
            <li>Choose Profile &gt; Attach Profiler ( <img src="img/attach.png">&nbsp;) from the main menu to open the 
                Select Profiling Task dialog box.</li>
            <li>Select the target application from the Attach To drop-down list at the top of the dialog box.</li>
            <li>Click <b>define</b> to invoke the Attach Wizard where you can specify the Attach mode, if not already specified.</li>
            <li>Select the target type of the application.</li>
            <li>Select Local as the Attach Method and Dynamic as the Attach Invocation. Click Finish to finish the wizard.</li>
            <li>Select a profiling task and any options.</li>
            <li>Click Attach.</li>
            <li>Select the process to profile. Click OK.</li>
			<!--Depending on which attachment method you specified in the Attach Wizard,
			one of the following occurs:
			<ul>
				<li>If you chose "PID" as the invocation method, clicking Attach 
				completes the attachment process.</li>
				<li>If you chose "Use Ctrl+Break" as the invocation method, 
				clicking Attach opens a progress dialog box. Go to the console 
				window of the target VM and on your keyboard hit Ctrl+Break (on Windows)
				 or Ctrl+\ (on Solaris or Linux). This sends a signal to the JVM that 
				activates the Profiler agent and starts the connection.</li>
			</ul>
				<p>Note that when you hit Ctrl+Break, the JVM prints the list of currently active Java threads with their stacks and then checks if it can start the Profiler agent. 
                                If the Working directory name you gave is correct, the VM starts this library and prints "JFluid: target app manager starting on port ...", and the progress dialog 
                                in the Profiler disappears. Otherwise, nothing happens and your application just continues running.
                You can either attach the Profiler through the console window of the target 
                application or by specifying the PID of the target application. 
                If the target application does not have a console window you will need to 
                attach Profiler using the PID.</p>
-->
        </ol>
        <p>When you click OK, the IDE begins profiling the application and you can view the profiling results.</p>
        
        <p>Using the dynamic attach method, you can detach from and re-attach to the profiled application without stopping 
        the application.</p>
        
        <p><b>To detach from the application:</b></p> 
        <ul>
            <li>Choose Profile &gt; Detach from the main menu or click Detach in the Profiler window.</li>
        </ul> 
            <p>When you detach from the application, the connection to the target JVM is closed.
                When you click Detach, you can choose to stop the application upon detach or allow the application to keep running.
            You can reattach to the application by choosing Profile &gt; Attach Profiler from the main menu.</p>
            
<!--            This sends a command to deactivate the Profiler code in the target JVM and terminate the connection.
        The message <tt>connection with agent closed</tt> appears in the console window (if the target application has a console window).</p>
    -->    
        <h3>Modifying the profiling task</h3>
        <p>Once the connection is established and the profiler is attached to the target application,
        you can change the profiling task you are running on the target application without stopping or restarting the application.</p>
        <p><b>To change the profiling task without detaching:</b></p>
        <ol>
            <li>Choose Profile &gt; Modify Profiling (Alt+Shift+F2) from the main menu or click Modify Profiling
            ( <img src="img/clock-icon.png">&nbsp;) in the Profiler window.</li>
            <li>Select a new profiling command and adjust any settings.</li>
            <li>Click Run.</li>
        </ol>
        <p>The target application is instrumented again without starting or
        stopping the application.</p>
        <!--
        <ul class="note">                
            <li>If you are not sure about the startup directory of your application, 
            but know its process ID, you can send the target JVM the same 
            signal or press Ctrl+Break in its console window. After dumping the threads,
            the JVM always prints its startup directory.</li>
        </ul>
            -->    
        <dl>
            <dt><a name="seealso">See Also</a></dt>
            <!--<dd><a href="attach_jvm.html">About the Profiler Modified JVM</a></dd>-->
        </dl>
        <hr>
        <small><a href="../credits.html">Legal
Notices</a></small>
        <table border="0" cellpadding="50">
        <tr><td>&nbsp;</td></tr>
    </table>
        
    </body>
</html>
