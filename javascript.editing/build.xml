<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See harness/README in the NetBeans platform -->
<!-- for some information on what you could do (e.g. targets to override). -->
<!-- If you delete this file and reopen the project it will be recreated. -->
<project name="javascript.editing" default="netbeans" basedir=".">
    <description>Builds, tests, and runs the project org.netbeans.modules.javascript.editing</description>
    <import file="../nbbuild/templates/projectized.xml"/>
    
    <target name="files-init" depends="projectized-common.files-init">
        <!-- Override module.files definition performed by parent, used for NBMs etc. -->
        <patternset id="module.files" includes="${release.files},${extra.module.files}">
            <!-- Standard includes (from common definition) -->
            <include name="${module.jar}"/>
            <include name="${javahelp.jar}" if="has.javahelp"/>
            <include name="config/Modules/${code.name.base.dashes}.xml"/>
            <include name="config/ModuleAutoDeps/${code.name.base.dashes}.xml" if="has.module.auto.deps"/>
            <include name="ant/nblib/${code.name.base.dashes}.jar"/>
            <!-- Ruby module additions -->
            <include name="jsstubs/**"/>
            <include name="preindexed-javascript/**"/>
        </patternset>
    </target>

    <target name="release" depends="init">
        <!-- Generated Ruby files for core libraries, used by code completion
             etc. See the extractsigs project for details. -->
        <unzip dest="${cluster}" src="release/jsstubs.sipp"/>
        <unzip dest="${cluster}" src="release/js-domstubs.sipp"/>

        <!-- Don't make the files read-only since this is probably going
             to create headaches for Auto Update! My thought here was that
             users shouldn't be editing these files, so make them read-only
             to avoid accidental edits, but I really should be sticking these
             files in a Jar anyway; I will do that as soon as indexing works
             inside jars.
        <chmod perm="ugo-w">
          <fileset dir="${jruby_dir}/">
            <include name="jsstubs/*"/>
          </fileset>
        </chmod>
        -->

        <unzip dest="${cluster}/../" src="release/preindexed.sipp"/>
        <unzip dest="${cluster}" src="release/preindexed-native.sipp"/>
    </target>

</project>

