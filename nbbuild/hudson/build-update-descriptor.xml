<project name="build-update-descriptor" basedir="../.." default="descriptor">
    <target name="descriptor">
        <taskdef classpath="nbbuild/netbeans/harness/tasks.jar" resource="org/netbeans/nbbuild/taskdefs.properties"/>
        <property name="use.license.url.in.catalog" value="true"/>
        <makeupdatedesc desc="nbbuild/nbms/updates.xml" distbase="." automaticgrouping="true" uselicenseurl="${use.license.url.in.catalog}">
            <fileset dir="nbbuild/nbms">
                <include name="**/*.nbm"/>
            </fileset>
            <updaterjar>
                <fileset dir="nbbuild/netbeans" includes="platform*/modules/ext/updater.jar"/>
            </updaterjar>
        </makeupdatedesc>
        <gzip src="nbbuild/nbms/updates.xml" destfile="nbbuild/nbms/updates.xml.gz"/>
        <taskdef name="vuc" classname="org.netbeans.nbbuild.VerifyUpdateCenter" classpath="nbbuild/nbantext.jar"/>
        <echo>Checking synchronic and diachronic consistency of NBMs; see http://wiki.netbeans.org/wiki/view/DevFaqImplementationDependency</echo>
        <vuc updates="nbbuild/nbms/updates.xml" oldupdates="../lastSuccessful/archive/nbbuild/nbms/updates.xml" report="nbbuild/nbms/vuc-report.xml">
            <classpath>
                <fileset dir="nbbuild/netbeans">
                    <include name="platform*/lib/*.jar"/>
                    <include name="platform*/core/*.jar"/>
                </fileset>
            </classpath>
        </vuc>
    </target>
</project>
