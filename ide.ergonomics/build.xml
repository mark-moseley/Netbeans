<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="netbeans" name="ide.ergonomics">
    <description>Builds, tests, and runs the project org.netbeans.modules.ide.ergonomics</description>
    <import file="../nbbuild/templates/projectized.xml"/>

    <target name="-release.dir" depends="-disable-kits,projectized-common.-release.dir"/>

    <!--
    -
    - Internal implementation
    -
    -->

    <target name="-disable-kits" depends="init-tasks">
        <mkdir dir="${release.dir}/config/Modules"/>
        <subant genericantfile="build.xml" target="-disable-one-cluster">
            <property name="xmldir" value="${release.dir}/config/Modules"/>
            <dirset dir="${netbeans.dest.dir}">
                <include name="*"/>
                <exclude name="ide1*"/>
                <exclude name="platform*"/>
                <exclude name="nb*.*"/>
                <exclude name="bin"/>
                <exclude name="etc"/>
            </dirset>
        </subant>
    </target>

    <target name="-disable-one-cluster" depends="init-tasks">
        <createmodulexml xmldir="${xmldir}">
            <disabled dir=".">
                <and>
                    <filename name="modules/*.jar"/>
                    <custom 
                        classname="org.netbeans.nbbuild.ModuleStateSelector"
                        classpath="${nb_all}/nbbuild/nbantext.jar"
                    >
                        <param name="acceptEnabled" value="true"/>
                    </custom>
                </and>
            </disabled>
        </createmodulexml>
    </target>
</project>
